\begin{figure*}
\centering
\[
\begin{array}{ccc}
\begin{array}{llll}
\tau & \bnfdef & \tau \rightarrow \tau \\
     & \bnfalt & \{ f_i{:}\tau_i ^{i \in 1..n} \} \\
     & \bnfalt & \keyw{ref}~ \tau \\
     & \bnfalt & t \\
     & \bnfalt & \boldsymbol\mu t.\tau \\
\\[1ex]

\Gamma & ::= & \{ \overline{x} {:} \overline{\tau} \} \\

\Sigma & ::= & \{ \overline{l} {:} \overline{\tau} \} \\
\end{array}
&
\begin{array}{llll}
v    & \bnfdef & \boldsymbol\lambda x{:}\tau . e \\
     & \bnfalt & \{ f_i = v_i ^{i \in 1..n} \}\\
     & \bnfalt & \ell \\
     & \bnfalt & \keyw{fold}[\tau]~ v \\
\\[1ex]

S & ::= & \{ \overline{l} = \overline{v} \} \\
\end{array}
&
\begin{array}{llll}
e    & \bnfdef & x \\
     & \bnfalt & \boldsymbol\lambda x{:}\tau . e \\
     & \bnfalt & e(e) \\
     & \bnfalt & \{ f_i = e_i ^{i \in 1..n} \} \\
     & \bnfalt & e.f & \\
     % & \bnfalt & \keyw{let}~ x = e ~\keyw{in}~ e \\
     & \bnfalt & \keyw{fix}~ e \\
     & \bnfalt & \keyw{alloc}~ e \\
     & \bnfalt & !e \\
     & \bnfalt & e := e \\
     & \bnfalt & \keyw{fold}[\tau]~ e \\
     & \bnfalt & \keyw{unfold}[\tau]~ e \\
     & \bnfalt & l \\
\\[1ex]
\end{array}
\\
\end{array}
\]
\[
\begin{array}{c}
\keyw{letrec}~ x{:}\tau_1 = e_1 ~\keyw{in}~ e_2 ~\buildrel {def}\over=~
\keyw{let} x{:}\tau_1 = \keyw{fix} (\boldsymbol\lambda x{:}\tau_1.e_1) ~\keyw{in}~ e_2\\[1ex]

\keyw{let}~ x{:}\tau_1 = e_1 ~\keyw{in}~ e_2 ~\buildrel {def}\over=~
(\boldsymbol\lambda x{:}\tau_1.e_2)(e_1)\\
\end{array}
\]
\caption{Lambda Calculus with Extensions}
\label{f-core1-syntax}
\end{figure*}
