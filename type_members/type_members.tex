\documentclass{llncs}

\usepackage{listings}
\usepackage{amssymb}
\usepackage[margin=.9in]{geometry}
\usepackage{amsmath}
\usepackage{mathpartir}

\begin{document}


\section{Type Members}

\subsection{Syntax}



\[
\begin{array}{lll}
\begin{array}{lllr}
e & ::= & x & expression \\
& | & \texttt{var} \; x = \texttt{new} \; \{\texttt{self} \Rightarrow \overline{d}\}; \; e&\\
%& | & \lambda x:T = e\\
%& | & e(e)\\
& | & e.m(e) &\\
& | & e.f &\\
& | & e.f = e&\\
%& | & l &\\
&&\\
v & ::= & x & value \\
&&\\
d & ::= & \texttt{var} \; f : T = e & declaration \\
  & |   & \texttt{def} \; m : T(x:T) = e &\\
  & |   & \texttt{type} \; L : T .. T = T &\\
&&\\
%p & ::= & x & path \\
%  & | & l & \\
&&\\
\Gamma & :: = & \varnothing \; | \; \Gamma, \; x : T & context \\
&&\\
\mu & :: = & \varnothing \; | \; \mu,\; l \mapsto \{\texttt{self} \Rightarrow \overline{d}\} & store \\
%&&\\
%\mu & :: = & \varnothing \; | \; \mu,\; l \mapsto \{\texttt{self} \Rightarrow \overline{d}\} & store
&&\\
\Sigma & :: = & \varnothing \; | \; \Sigma,\; l : T & store \; context \\
\end{array}
& ~~~~~~
&
\begin{array}{lllr}
%T & ::= & \{\texttt{self} \Rightarrow \overline{\sigma}\} & type \\
T & ::= & \{\texttt{self} \Rightarrow \overline{\sigma}\} & type \\
& | & x.L &\\
& | & \top & \\
& | & \bot & \\
&&\\
\sigma & ::= & \texttt{var} \; f:T & decl \; type\\
       & |   & \texttt{def} \; m:T \rightarrow T \\
		 & |   & \texttt{type} \; L : T .. T &\\
&&\\
E & :: = & [\;] & evaluation \; context \\
       & | & E.m(e)\\
       & | & v.m(E)\\
       & | & E.f\\
       & | & E.f = e\\
       & | & v.f = E\\
&&\\
\Delta & :: = & \varnothing \; | \; \Delta,\; x \mapsto l & substitution \; context \\
\end{array}
\end{array}
\]

\subsection{Semantics}
%\subsubsection{Subtyping}

\input{subtype}

\input{wf}

%\subsubsection{Typing}

\input{typing}

\input{reduction}

Still need to add:

\hfill \fbox{$\Gamma \vdash T \prec \overline{d}$}\\


\hfill \fbox{$\Gamma \vdash T \ni d$}
\\

\section{Type Safety}

\subsection{Preservation}


\begin{theorem}[Subject Reduction ]
If $ \Delta; \Sigma; \Gamma;  \vdash e : T$, 
   	$\Delta; \; \mu \; | \; e \rightarrow \Delta'; \; \mu' \; | \; e'$ where
	$\Delta; \; \Gamma \vdash \mu : \Sigma$ then 
 	$\exists \Gamma', \Sigma', T'$ s.t. 
	$\Sigma'$ extends $\Sigma$,
	$\Gamma'$ extends $\Gamma$,
	$\Delta'; \Sigma'; \Gamma';  \vdash e' : T'$
	and $\Gamma' \vdash T'<:T$.
\end{theorem}

\subsection{Progress}
\begin{theorem}[Progress]
If $\Delta; \Sigma; \Gamma;  \vdash e : T$, then either
\begin{enumerate}
\item e is a value, or
\item $\forall \mu$ s.t.
		   $\Delta; \; \Gamma \vdash \mu : \Sigma$,
         $\exists e', \mu', \Delta'$ s.t. 
         $\Delta; \; \mu \; | \; e \rightarrow \Delta'; \; \mu' \; | \; e'$
\end{enumerate}
\end{theorem}

\end{document}