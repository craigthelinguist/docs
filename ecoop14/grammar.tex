% !TEX root = ecoop14.tex

\begin{figure}
\begin{lstlisting}[mathescape]
|stmt| $\rightarrow$ $\varepsilon$
|stmt| $\rightarrow$ |exp|$^=$ NEWLINE$^\geq$ stmt$^=$
|stmt| $\rightarrow$ |expwdsl|$^=$ dsltilde$^>$ stmt$^=$
|stmt| $\rightarrow$ |ID|$^=$ '='$^\geq$ exp$^\geq$ NEWLINE$^\geq$ stmt$^=$
|stmt| $\rightarrow$ |ID|$^=$ '='$^\geq$ expwdsl$^\geq$ dsltilde$^>$ stmt$^=$
|stmt| $\rightarrow$ |exp|$^=$ '.'$^\geq$ ID$^\geq$ '='$^\geq$ exp$^\geq$ NEWLINE$^\geq$ stmt$^=$
|stmt| $\rightarrow$ |exp|$^=$ '.'$^\geq$ ID$^\geq$ '='$^\geq$ expwdsl$^\geq$ dsltilde$^>$ stmt$^=$
|stmt| $\rightarrow$ |expwdsl|$^=$ '.'$^\geq$ ID$^\geq$ '='$^\geq$ exp$^\geq$ dsltilde$^>$ stmt$^=$

|exp| $\rightarrow$ |ID|$^=$
|exp| $\rightarrow$ |'fn'|$^=$ ID$^\geq$ ':'$^\geq$ type$^\geq$ '=>'$^\geq$ exp$^\geq$
|exp| $\rightarrow$ |exp|$^=$ '('$^\geq$ arglist$^\geq$ ')'$^\geq$
|exp| $\rightarrow$ |exp|$^=$ '.'$^\geq$ ID$^\geq$
|exp| $\rightarrow$ |exp|$^=$ ':'$^\geq$ type$^\geq$
|exp| $\rightarrow$ |'('|$^=$ type$^\geq$ ')'$^\geq$ exp$^\geq$
|exp| $\rightarrow$ |'new'|$^=$ newspec$^>$
|exp| $\rightarrow$ |type|$^=$ 'metaobject'$^\geq$
|exp| $\rightarrow$ dslinline$^=$

|expwdsl| $\rightarrow$ |'~'|$^=$
|expwdsl| $\rightarrow$ |expwdsl|$^=$ '.'$^\geq$ ID$^\geq$
|expwdsl| $\rightarrow$ |expwdsl|$^=$ '('$^\geq$ arglist$^\geq$ ')'$^\geq$
|expwdsl| $\rightarrow$ |exp|$^=$ '('$^\geq$ arglistwdsl$^\geq$ ')'$^\geq$
|expwdsl| $\rightarrow$ |expwdsl|$^=$ ':'$^\geq$ type$^\geq$
|expwdsl| $\rightarrow$ |'('|$^=$ type$^\geq$ ')'$^\geq$ expwdsl$^\geq$
|expwdsl| $\rightarrow$ |'fn'|$^=$ ID$^\geq$ ':'$^\geq$ type$^\geq$ '=>'$^\geq$ expwdsl$^\geq$

|dsltilde| $\rightarrow$ NEWLINE$^\geq$ dsltildebody$^=$

|dsltildebody| $\rightarrow$ |DSL|$^=$

|dslinline| $\rightarrow$ |'`'|$^=$ dsl$^\geq$ '`'$^\geq$
|dslinline| $\rightarrow$ |'''|$^=$ dsl$^\geq$ '''$^\geq$
|dslinline| $\rightarrow$ |'"'|$^=$ dsl$^\geq$ '"'$^\geq$
|dslinline| $\rightarrow$ |'/'|$^=$ dsl$^\geq$ '/'$^\geq$
|dslinline| $\rightarrow$ |'\'|$^=$ dsl$^\geq$ '\'$^\geq$
|dslinline| $\rightarrow$ |'{'|$^=$ dsl$^\geq$ '}'$^\geq$
|dslinline| $\rightarrow$ |'['|$^=$ dsl$^\geq$ ']'$^\geq$
|dslinline| $\rightarrow$ |'<'|$^=$ dsl$^\geq$ '>'$^\geq$
|dslinline| $\rightarrow$ |'&'|$^=$ dsl$^\geq$ ';'$^\geq$
|dslinline| $\rightarrow$ |'#'|$^=$ dsl$^\geq$ ' '$^\geq$
|dslinline| $\rightarrow$ |'+'|$^=$ dsl$^\geq$ ' '$^\geq$
|dslinline| $\rightarrow$ |'-'|$^=$ dsl$^\geq$ ' '$^\geq$
|dslinline| $\rightarrow$ |'+'|$^=$ dsl$^\geq$ '.'$^\geq$ dsl$^\geq$
|dslinline| $\rightarrow$ |'-'|$^=$ dsl$^\geq$ '.'$^\geq$ dsl$^\geq$

|dsl| $\rightarrow$ $\varepsilon$
|dsl| $\rightarrow$ |DSL|$^=$
\end{lstlisting}
\caption{Grammar in Adams' Formalism}
\label{f-grammar}
\end{figure}
