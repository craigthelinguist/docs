%!TEX root=sac15-tr.tex
\begin{figure}[t!]
\begin{lstlisting}[style=wyvern]
objtype Parser(T)
  def parse(ParseStream) : Result(T)
  syntax = (* ... parser generator syntax ... *)

casetype Result(T)
  OK of T
  Error of String * Location

casetype Exp
  Var of ID
  Ascription of Exp * Type
  Let of Exp * ID * Exp
  Fn of ID * Exp
  TypeFn of Type * Kind * Exp
  Ap of Exp * Exp
  New of List(ID * Exp)
  Objfield of ID * Exp
  CaseIntro of ID * Exp
  ToAST of Exp
  SyntaxParser of ID
  Spliced of ParseStream
  ApTSM of ID * ParserStream
  syntax = (* ... exp quasiquotes ... *)

casetype Type
  Declared of ID
  Objtype of List(MemberDecl)
  Casetype of List(CaseDecl)
  Arrow of Type * Type
  TyVar of ID 
  TyFn of ID * Type
  TyAp of Type * Type
  Spliced of ParseStream 
  syntax = (* ... type quasiquotes ... *)

objtype Pair(T, T)
  val first : T
  val second : T
\end{lstlisting}
\mycaption{A portion of the Wyvern prelude relevant to TSLs and TSMs. Wyvern prelude contains all built-in types used for the core Wyvern language.}
\label{exp-prelude}
\end{figure}