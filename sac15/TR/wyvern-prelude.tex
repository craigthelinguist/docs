%!TEX root=sac15-tr.tex
\begin{figure}[t!]
\begin{lstlisting}[style=wyvern]
objtype Parser(T)
  def parse(ParseStream) : Result(T)
  syntax = (* ... parser generator syntax ... *)

casetype Result(T)
  OK of T
  Error of String * Location

casetype Exp
  Var of ID
  Fn of ID * Exp
  Ap of Exp * Exp
  Ascription of Exp * Type
  CaseIntro of ID * Exp
  (* ... *)
  Spliced of ParseStream 
  syntax = (* ... exp quasiquotes ... *)

casetype Type
  Declared of ID
  Objtype of List(MemberDecl)
  Casetype of List(CaseDecl)
  Arrow of Type * Type
  (* ... *)
  TyVar of ID 
  TyFn of ID * Type
  TyAp of Type * Type
  Spliced of ParseStream 
  syntax = (* ... type quasiquotes ... *)
\end{lstlisting}
\mycaption{A portion of the Wyvern prelude relevant to TSLs and TSMs. Wyvern prelude contains all built-in types used for the core Wyvern language.}
\label{exp-prelude}
\end{figure}